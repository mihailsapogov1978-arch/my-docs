# Установка и настройка клиентского программного обеспечения ГИС «Смета ЯНАО» на автоматизированных рабочих местах с использованием VipNet Client

!!! warning "Необходимо проверить работоспособность установленного VipNet клиента и доступность сетевого узла LARM-Sal-CB-ServSmetaSP. Также при отсутствии скачать и установить КриптоПро CSP: <https://cryptopro.ru/products/csp/downloads>"

![](media/image17.png)

## Загрузка программного обеспечения ГИС «Смета ЯНАО» {data-toc-label="Загрузка ГИС «Смета ЯНАО»"}

!!! note "Для операционной системы РЕД ОС: <https://files.yanao.ru/s/dfn7iAL85Jf5e7e>"

!!! note "Для операционной системы Windows: <https://files.yanao.ru/s/PqieKP4SSB8RGqK>"

## Настройка программного обеспечения ГИС «Смета ЯНАО» {data-toc-label="Настройка ГИС «Смета ЯНАО»"}

!!! note "Для операционной системы РЕД ОС добавить права на выполнение исполняемого файла stimrun."

![](media/image20.png)

![](media/image30.png)

Убедиться, что у текущего пользователя есть права доступа на запись в текущий каталог (при первом запуске клиент создаст файл инициализации в текущем каталоге).

Запустить stimrun, в модальном окне перейте по гиперссылке «адрес сервера».

![](media/image40.png)

В дополнительном модальном окне в поле «Адрес сервера» добавить адрес
сервера авторизации в формате IP:PORT. Узнать адрес сервера авторизации
возможно следующими способами:
!!! note "Для операционных систем семейства Microsoft Windows: необходимо запустить приложение ViPNet Client, выбрать «Защищённая сеть», найти узел LARM-Sal-CB-ServSmetaSP, открыть свойства узла, посмотреть реальный IP-адрес узла, использовать его вместе с портом 8080. В данном случае адрес сервера авторизации будет выглядеть 7.0.68.149:8080"
![](media/image50.jpg)
!!! note "Для отечественных операционных систем необходимо запустить приложение ViPNet Client, выбрать «Сетевые узлы», в поиске ввести наименование узла LARM-Sal-CB-ServSmetaSP, либо кратко как на изображении. В выборке посмотреть IP-адрес узла, использовать его вместе с портом 8080. В данном случае адрес сервера авторизации будет выглядеть 7.0.68.149:8080."

![](media/image17.png)

!!! Warning "Запуск приложения ViPNet Client необходимо осуществлять от имени пользователя, под которым была произведена установка лицензии (dst)."

## В случае использования прокси-сервера в Вашей локально-вычислительной сети необходимо указать параметры прокси-сервера, доступные при переходе по гиперссылке «Настройки» {data-toc-label="Использование прокси-сервера"}

![](media/image60.png)

Если Вы всё сделали правильно, то при выборе в выпадающем списке должен
появится список баз данных различных учреждений. Выберите нужно
учреждение из списка.

В случае если в выпадающем списке отсутствует перечень баз данных,
значит доступ к серверу ГИС «Смета ЯНАО» ограничен. Причин может быть
несколько:

- отсутствие доступа к узлу защищённой сети VipNet -
  LARM-Sal-CB-ServSmetaSP;

- проблемы на уровне сетевых технологий Вашей локально-вычислительной
  сети;

- сервер ГИС «Смета ЯНАО» в плановом обслуживании (недоступность не
  более 40 минут в позднее вечернее время);

- локальные проблемы с операционной системой автоматизированного
  рабочего места;

- прочие.

В большинстве случаев большая доля вероятных ошибок происходит на стороне конечного пользователя. В этом случае Вам необходимо предпринимать соответствующие меры по устранению проблем.

![](media/image70.png)

## Тестовая апробация функционала ГИС «Смета ЯНАО» на примере базы данных департамент по общим вопросам {data-toc-label="Тестовая апробация функционала"}

Для апробирования функционала для пользователей создана специальная база
данных <strong>Департамент по общим вопросам ЯНАО_hidden.drx</strong>

!!! note "Дополнительные детали"
      Суффикс <strong>\_hidden</strong> означает скрытый контекст в списке подключений. Это сделано для того чтобы не смешивать тестовые базы данных и реальными. Поэтому на данном этапе Вам необходимо скопировать наименование Департамент по общим вопросам ЯНАО_hidden.drx и вставить в поле «Конфигурация.

      В реальности пользователи работают в реальных базах данных, поэтому
      копирование наименований конфигурации не требуется: достаочно выбора значений из списка.

      Если конфигурация установлена правильно, в списке пользователей должен отобразиться перечень пользователей выбранной базы данных. Для теста используйте имя пользователя student. В рабочих базах имя пользователя = "Фамилия Имя Отчество"

Далее, введите пароль - 1

![](media/image80.png)

Результат авторизации пользователя приведен на рисунке ниже (выбор конфигурации, имя пользователя, пароль, рабочее место) с максимальным уровнем доступа в рамках базы данных департамента по общим вопросам:

![](media/image90.png)

## Запуск ГИС "Смета ЯНАО" для операционных систем Microsoft Windows (адрес сервера подключения может отличаться) {data-toc-label="Запуск ГИС «Смета ЯНАО»"}

![](media/image100.png)

Требуется установить сервер обновлений из стабильной ветки дистрибутива (указывается адрес подключения к серверу):

![](media/image110.png)

## Установка и настройка клиентского программного обеспечения ГИС «Смета ЯНАО» на автоматизированных рабочих местах с использованием технологии TLS (альтернативный способ только в РМТКС ЯНАО) {data-toc-label="Установка ГИС «Смета ЯНАО» с использованием TLS"}


<table class="steps">
<tr><td width="30" valign="top"><strong>1.</strong></td><td>Открыть терминал (Ctrl+Alt+T)</td></tr>
<tr><td valign="top"><strong>2.</strong></td><td>Команда для суперпользователя <code>su</code></td></tr>
<tr><td valign="top"><strong>3.</strong></td><td>Вводим пароль суперпользователя</td></tr>
<tr><td valign="top"><strong>4.</strong></td><td>Команда <code>openssl-switch-config gost</code></td></tr>
<tr><td valign="top"><strong>5.</strong></td><td>Команда <code>openssl engine</code></td></tr>
<tr><td valign="top"><strong>6.</strong></td><td>В итоге должно получиться так:</td></tr>
</table>

![Терминал с результатом](media/image120.png)

<table class="steps">
<tr><td width="30" valign="top"><strong>7.</strong></td><td>Команда <code>exit</code></td></tr>
<tr><td valign="top"><strong>8.</strong></td><td>Удалить все файлы из директории <code>stimate</code> (находится в домашней папке пользователя)</td></tr>
</table>

Для операционной системы РЕД ОС. 
Скачиваем клиент <a href="https://files.yanao.ru/s/WfnAMN7MFNayJRR">по ссылке</a>

!!! note "Обязательные системные требования для РЕД ОС - требуется установленое программное обеспечение КриптоПро CSP 4.0 и выше: <https://cryptopro.ru/products/csp/downloads>"

10. В свойствах файла stimrun выставить права как на картинке:

![](media/image150.png)

11. Запустить файл stimrun и дождаться установки.

12. При подключении ввести адрес сервера:
    [[https://smeta-app.yanao.ru:443]](https://smeta-app.yanao.ru:443/)

13. После первого входа из меню <strong>Настройки</strong> > <strong>открыть настройки клиента</strong>
    и во вкладке <strong>Программа</strong> выбрать сервер обновлений
    win-stim.krista.ru:8080. Также поставить галочку на <strong>Регистрация</strong>
    для запуска приложения из браузера\>

![](media/image160.png)

Для операционной системы MS Windows <a href="https://files.yanao.ru/s/ZyG8ZHPzMSxt3BN">скачиваем клиент по ссылке</a>

1. Удалить все файлы из директории <i>stimate</i> (находится в папке C:\\
   Windows).

2. Переместить скачанные файлы <i>stimrun</i> и <i>stimrun.ini</i> в директорию <i>stimate/</i>

3. Запустить файл stimrun и дождаться установки.

4. При подключении ввести адрес сервера:
   [[https://smeta-app.yanao.ru:443]](https://smeta-app.yanao.ru:443/)

5. После первого входа из меню <strong>Настройки</strong> открыть настройки клиента и во вкладке <strong>Программа</strong> выбрать сервер обновлений <code>win-stim.krista.ru:8080</code>. Также поставить галочку на <strong>Регистрация</strong> для запуска приложения из браузера\>

![](media/image160.png)
